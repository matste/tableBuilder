<!DOCTYPE html>

<!--
Developed on Aug 21, 2018 by Stephan Mattalo
Purpose: Allow customers to add and remove product to create place-settings in real-time.
-->

<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>ERG - Table Builder</title>
    <link href="./style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>


    <script type="text/javascript">

      function makeActive(x) {
        $('.active').removeClass('active')
        $('#' + x).addClass('active');
        console.log(x +' has been selected.');
      }

      function grow() {
        if (!document.querySelector('.active')){
          console.log('Error: no item has been selected.');
          alert('You must first select an item from the table to increase it\'s size');
        }
        else{
          var x = document.querySelector('.active').id
          var currentWidth = document.getElementById(x).offsetWidth;
          currentWidth *= 1.1;
          document.getElementById(x).style.width = currentWidth + "px";
          var currentHeight = document.getElementById(x).offsetHeight;
          currentHeight *= 1.1;
          document.getElementById(x).style.height = currentHeight + "px";
          console.log(x + ' size has been increased.');
        }
      }

      function shrink() {
        if (!document.querySelector('.active')){
          console.log('Error: no item has been selected.');
          alert('You must first select an item from the table to decrease it\'s size');
        }
          else {
          var x = document.querySelector('.active').id
          var currentWidth = document.getElementById(x).offsetWidth;
          currentWidth /= 1.1;
          document.getElementById(x).style.width = currentWidth + "px";
          var currentHeight = document.getElementById(x).offsetHeight;
          currentHeight /= 1.1;
          document.getElementById(x).style.height = currentHeight + "px";
          console.log(x + ' size has been decreased.');
        }
      }

      function clearSelection(x) {
        $('.active').removeClass('active')
        console.log('All items have been de-selected.');
      }

      function remove() {
        if (!document.querySelector('.active')){
          console.log('No items are selected.');
          alert('You must first select an item from the table to be removed.');
        }
        else{
          var x = document.querySelector('.active').id;
          document.getElementById(x).remove();
          $('.active').removeClass('active') // makes sure there are no items active anymore
          console.log(x + ' has been removed from the table');
        }
      }

      function upLayer() {
        var x = $('.active').css('z-index');
        x = Number(x);

        if (x >= 10){
          console.log('You are on the top layer.');
          alert('You are on the top layer');
          x = 10;
        }
        else{
          x = x + 1;
          y = document.querySelector('.active').id;
          document.getElementById(y).style.zIndex = x.toString();
          console.log('Layer has been increased to ' + x);
        }
      }

      function downLayer() {
        var x = $('.active').css('z-index');
        x = Number(x);

        if (x <= 1){
          console.log('You are on the bottom layer.');
          alert('You are on the bottom layer');
          x = 1;
        }
        else{
          x = x - 1;
          y = document.querySelector('.active').id;
          document.getElementById(y).style.zIndex = x.toString();
          console.log('Layer has been decreased to ' + x);
        }
      }

      //Rotate product 90 deg clockwise. Reset to 0 when meets or exceeds 360 deg.
      //re-write this function to first obtain current rotation, then add 90 deg to it
      //currently only tracks deg in a variable, which doesn't reset when new element is selected

      var degrees = 0;
      function rotate() {
        //var elemId = document.querySelector('.active').id;
        //var elem = document.getElementById(elemId);
        //var curDeg = window.getComputedStyle(elem).getPropertyValue("transform");
        //console.log(curDeg);

        degrees = (degrees + 90) % 360;
        $(".active").css({
          transform: "rotate(" + degrees + "deg)"
        });
      }


      //re-write this into one function, takes input of x/y movement from function call

      function moveUp(amount){
        var y = document.querySelector('.active').id;
        var elem = document.getElementById(y);
        var topStart = window.getComputedStyle(elem).getPropertyValue("top");
        var newPosition = parseInt(topStart.substring(0, topStart.length - 2)) - amount;
        elem.style.top = newPosition + "px";
      }

      function moveDown(amount){
        var y = document.querySelector('.active').id;
        var elem = document.getElementById(y);
        var topStart = window.getComputedStyle(elem).getPropertyValue("top");
        var newPosition = parseInt(topStart.substring(0, topStart.length - 2)) + amount;
        elem.style.top = newPosition + "px";
      }

      function moveLeft(amount){
        var y = document.querySelector('.active').id;
        var elem = document.getElementById(y);
        var topStart = window.getComputedStyle(elem).getPropertyValue("left");
        var newPosition = parseInt(topStart.substring(0, topStart.length - 2)) - amount;
        elem.style.left = newPosition + "px";
      }

      function moveRight(amount){
        var y = document.querySelector('.active').id;
        var elem = document.getElementById(y);
        var topStart = window.getComputedStyle(elem).getPropertyValue("left");
        var newPosition = parseInt(topStart.substring(0, topStart.length - 2)) + amount;
        elem.style.left = newPosition + "px";
      }




//remove this functions later, since we need a class/object for creation of future objects.
// functions above will change to class methods during conversion to classes

      function changeGold(){
        document.getElementById("fork1").style.backgroundImage = "url('./images/goldcutlery.png')";}

      function changeSilver(){
        document.getElementById("fork1").style.backgroundImage = "url('./images/forkexample.png')";}

    </script>

  </head>
  <body>

  <div class="container">

      <div class="canvas">
        <!--<span><strong>Event Rental Group - Table Builder (Beta) 1.0.0</strong></span>-->
        <div id="fork1" class='fork' onClick="makeActive($(this).attr('id'));"></div>
        <div id="plate1" class='plate' onClick="makeActive($(this).attr('id'));"></div>
      </div>

      <div class="menu">
        <ul>
          <li onClick="clearSelection();">Unselect All</li>
          <li onClick="grow()">(+) Grow</li>
          <li onClick="shrink()">(-) Shrink</li>
          <li onClick="upLayer()">Layer - Up</li>
          <li onClick="downLayer()">Layer - Down</li>
          <li onClick="rotate();">Rotate 90 deg.</li>
          <li onClick="moveUp(50);">Up</li>
          <li onClick="moveDown(50);">Down</li>
          <li onClick="moveLeft(50);">Left</li>
          <li onClick="moveRight(50);">Right</li>
          <li onClick="remove();" class="removeItem"><i class="fas fa-trash-alt 3x"></i> Remove Item</li>
        </ul>
      </div>

      <div class="productListing">
        <ul>
          <li>Linens</li>
          <li>Basic Linens</li>
          <li>Black</li>
          <li>White</li>
          <li>Yelow</li>
          <li>Black</li>
          <li>Black</li>
          <li>Black</li>

          <li>Black</li>


        </ul>

        <ul>
          <li>Chargers</li>
        </ul>

        <ul>
          <li>Plateware</li>
        </ul>

        <ul>
          <li>Flatware</li>
        </ul>

      </div>



      <div>
        <p onClick="changeGold();">Gold Cutlery</p>
        <p onClick="changeSilver();">Silver Cutlery</p>
      </div>


  </div>

  </body>
</html>
